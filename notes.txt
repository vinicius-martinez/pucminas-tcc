docker run --name postgres-lavra -e "POSTGRES_PASSWORD=postgres" -p 5433:5432 -v ~/Desktop/PostgreSQL:/var/lib/postgresql/data -d postgres
docker run  -e KEYCLOAK_USER=admin -e KEYCLOAK_PASSWORD=admin -p 8080:8080 quay.io/keycloak/keycloak:7.0.1

mvn io.quarkus:quarkus-maven-plugin:1.5.0.Final:create \
    -DprojectGroupId=br.edu.puc.sca.domain \
    -DprojectArtifactId=sca-domain-msa

./mvnw quarkus:add-extension -Dextensions="quarkus-hibernate-orm-panache,quarkus-jdbc-postgresql"

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-envers</artifactId>
</dependency>

mvn io.quarkus:quarkus-maven-plugin:1.5.0.Final:create \
    -DprojectGroupId=br.edu.puc.sca.lavra \
    -DprojectArtifactId=sca-lavra-api-msa \
    -DclassName="br.edu.puc.sca.resource.LavraResource" \
    -Dpath="/api/v1/lavras"

./mvnw quarkus:add-extension -Dextensions="quarkus-resteasy,quarkus-resteasy-jsonb,quarkus-smallrye-openapi,smallrye-metrics,quarkus-oidc,rest-client,quarkus-hibernate-orm-panache,quarkus-jdbc-postgresql"

<dependency>
  <groupId>br.edu.puc.sca.domain</groupId>
  <artifactId>sca-domain-msa</artifactId>
  <version>1.0-SNAPSHOT</version>
</dependency>

mvn io.quarkus:quarkus-maven-plugin:1.5.0.Final:create \
    -DprojectGroupId=br.edu.puc.sca.equipamento \
    -DprojectArtifactId=sca-equipamento-api-msa \
    -DclassName="br.edu.puc.sca.resource.EquipamentoResource" \
    -Dpath="/api/v1/equipamentos"

  <dependency>
    <groupId>br.edu.puc.sca.domain</groupId>
    <artifactId>sca-domain-msa</artifactId>
    <version>1.0-SNAPSHOT</version>
  </dependency>

./mvnw quarkus:add-extension -Dextensions="quarkus-resteasy,quarkus-resteasy-jsonb,quarkus-smallrye-openapi,smallrye-metrics,quarkus-oidc,rest-client,quarkus-hibernate-orm-panache,quarkus-jdbc-postgresql"

./mvnw quarkus:add-extension -Dextensions="quarkus-resteasy,quarkus-resteasy-jsonb,quarkus-hibernate-orm-panache,quarkus-jdbc-postgresql,quarkus-smallrye-openapi,smallrye-metrics,quarkus-oidc,rest-client"

<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-envers</artifactId>
</dependency>


# Tokens

export access_token=$(\
  curl -X POST http://localhost:8080/auth/realms/sca/protocol/openid-connect/token \
  --user sca-lavra-msa:2eda88de-9bd9-418c-bbc4-4f7af729404c \
  -H 'content-type: application/x-www-form-urlencoded' \
  -d 'username=user2&password=user2&grant_type=password' | jq --raw-output '.access_token' \
 )

curl -v -X GET \
  http://localhost:8180/api/v1/users/me \
  -H "Authorization: Bearer "$access_token
